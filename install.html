<!doctype html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A layout example with a side menu that hides on mobile, just like the Pure website.">
    <title>AMSL &ndash; Bootcamp</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/pure/0.4.2/pure.css">
    <link rel="stylesheet" href="css/layouts/side-menu.css">
    <link rel="stylesheet" href="css/elag.css">
    <link rel="stylesheet" href="css/default.css">
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,400,300,700,600' rel='stylesheet' type='text/css'>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
</head>
    <body>
        <div id="layout">
            <!-- Menu toggle -->
            <a href="#menu" id="menuLink" class="menu-link">
            <!-- Hamburger icon -->
            <span></span>
            </a>
            <div id="menu">
                <div class="pure-menu pure-menu-open">
                    <a class="pure-menu-heading" href="#">AMSL</a>
                    <ul>
                        <li><a href="index.html">Home</a></li>
                        <li><a href="start.html">Start</a></li>
                        <li class="menu-item-divided pure-menu-selected"><a href="#">Installation</a></li>
                    </ul>
                </div>
            </div>
            <div id="main">
                <div class="header">
                    <h1>Installation</h1>
                    <h2>Let's go!</h2>
                </div>
                <div class="content">
                    <h1 id="images-overview">Images Overview</h1>

<ul>
  <li>There are two images, namely
    <ul>
      <li>elag2014_64 (for 64bit machines)</li>
      <li>elag2014_32 (for 32bit machines)</li>
    </ul>
  </li>
  <li>the computer name (not really needed) is elag</li>
  <li>The (only) user on these machines is
    <ul>
      <li>user name: elag</li>
      <li>password: elag</li>
    </ul>
  </li>
</ul>

<h2 id="manjaroarch">Manjaro/Arch</h2>

<ul>
  <li>Install VirtualBox with pacman</li>
  <li>Install and enable the kernel modules, as pointed out here: <a href="https://wiki.archlinux.org/index.php/VirtualBox">https://wiki.archlinux.org/index.php/VirtualBox</a>, especially point 1.2 und 1.3</li>
</ul>

<h1 id="php-and-odbc">PHP and ODBC</h1>
<p>Most of the following instructions can be done with the help of your terminal and editor of choice. PHP has already been installed on the VM but to make it work with OntoWiki we need two additional packages:</p>

<pre><code>$ sudo apt-get install php5-odbc libapache2-mod-php5</code></pre>

<p>The first package provides the required ODBC driver for PHP and the second one allows for the Apache2 to render PHP.</p>

<p>Now let’s configure php. Therefore locate php.ini via <code-inline>updatedb</code-inline>.</p>

<pre><code class="bash">$ sudo updatedb
$ locate php.ini
$ [editor] /path/to/php.ini
</code></pre>

<p>… change the values as recommended</p>

<h1 id="ontowiki">OntoWiki</h1>
<pre><code class="bash">$ cd /var/www/html
$ sudo mkdir OntoWiki
$ sudo chown -R elag:elag OntoWiki
$ sudo apt-get install git
$ git clone https://github.com/AKSW/OntoWiki.git OntoWiki 
$ cd OntoWiki
$ sudo apt-get install make
$ make deploy
</code></pre>

<p>You can enable debugging in OntoWiki by editing config.ini (copy and rename config.ini.dist before)</p>

<h1 id="virtuoso">Virtuoso</h1>
<p>If you are using the virtual machine you can install it from the official repositories: </p>

<p>You can now start the database server daemon with </p>
<pre><code>$ sudo service virtuoso-opensource-6.1 start</code></pre>

<p>Afterwards you can access the Virtuoso Conductor in your browser at <code-inline>http://localhost:8890/</code-inline> to assure Virtuoso is running.</p>

<h2 id="configuration">Configuration</h2>
<p>The central configuration file is located at <code-inline>/etc/virtuoso-opensource-6.1/virtuoso.ini</code-inline>. In that file add your OntoWiki directory to the <code-inline>DirsAllowed</code-inline> parameter:</p>

<pre><code class="apache">DirsAllowed = ., /usr/share/virtuoso-opensource-6.1/vad/, /path/to/OntoWiki/</code></pre>

<p>Now restart Virtuoso to let the changes take effect.</p>
<pre><code>$ sudo service virtuoso-opensource-6.1 restart</code></pre>

<h2 id="odbc-configuration">ODBC Configuration</h2>

<p>By default, ODBC should be working out-of-the-box. To check if your ODBC connection is working correctly execute the ODBC test.</p>

<p><a class="pure-button" id="odbctest-button"><i class="fa fa-play-circle-o button-icon"></i> Start ODBC test</a></p>

<div id="odbctest-output"></div>

<p>If the test fails, click on the following button to see instructions.</p>

<p><a class="pure-button" id="odbc-instructions-button"><i class="fa fa-book button-icon"></i> Show instructions</a></p>

<div id="odbc-instructions" class="hidden-div">

To make ODBC work with Virtuoso, two config files have to be edited. Add following lines to <code-inline>/etc/odbc.ini</code-inline> (create if not existent): 

<pre><code>[ODBC Data Sources]
VOS = Virtuoso

[VOS]
Driver = virtuoso-odbc
Description = Virtuoso Open-Source Edition
Address = localhost:1111
</code></pre>

Then edit <code-inline>/etc/odbcinst.ini</code-inline> and add the following lines:

<pre><code>[virtuoso-odbc]
Driver = /usr/lib/virtodbc.so   
</code></pre>

</div>

<h1 id="apacheontowiki-part-2">Apache/OntoWiki Part 2</h1>
<p>Once Virtuoso, ODBC and PHP are running we can finally configure the Apache Webserver and OntoWiki. First, edit <code-inline>/etc/apache2/sites-enabled/000-default.conf</code-inline></p>

<pre><code class="xml">&lt;Directory "/var/www/html"&gt;
Options Indexes [FollowSymLinks](./FollowSymLinks.markdown)
AllowOverride All 
&lt;/Directory&gt;
</code></pre>

<p>Now Restart apache.</p>
<pre><code class="bash">$ sudo service apache2 restart</code></pre>

<p>And don’t forget to activate Apache’s mod rewriting.</p>
<pre><code class="bash">$ sudo a2enmod rewrite</code></pre>

<p>Now checkout the required branch and initialize the submodules.</p>
<pre><code class="bash">$ git checkout --track -b deployment/erm-hd origin/deployment/erm-hd
$ git submodules init
$ git submodules update
</code></pre>

<p>Finally check <a href="http://localhost/OntoWiki">http://localhost/OntoWiki</a> if OntoWiki is running correctly.</p>

                </div>
            </div>
        </div>
        <script src="js/highlight.js"></script>
        <script src="js/ui.js"></script>
        <script src="js/jquery.js"></script>
        <script src="js/elag.js"></script>
    </body>
</html>